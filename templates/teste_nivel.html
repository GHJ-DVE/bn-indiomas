{% extends "base.html" %}

{% block title %}Teste de Nível - bn Idiomas{% endblock %}
{% block body_class %}page-home{% endblock %}

{% block content %}
<div class="pre-container">
    <div class="pre-form-card" id="quiz-container">
        <h2>Descubra seu Nível</h2>
        <p id="quiz-intro">Responda honestamente para sabermos por onde começar!</p>

        <form id="level-test">
            <div class="quiz-step" id="step-1">
                <p><strong>1. Você consegue se apresentar e falar cores/números em inglês?</strong></p>
                <label><input type="radio" name="q1" value="1"> Não, nada.</label><br>
                <label><input type="radio" name="q1" value="2"> Sim, o básico.</label>
            </div>

            <div class="quiz-step" id="step-2" style="margin-top:20px;">
                <p><strong>2. Você consegue entender frases simples em filmes sem legenda?</strong></p>
                <label><input type="radio" name="q2" value="1"> Quase nada.</label><br>
                <label><input type="radio" name="q2" value="2"> Entendo algumas frases soltas.</label>
            </div>

            <div class="quiz-step" id="step-3" style="margin-top:20px;">
                <p><strong>3. Você já estudou inglês antes?</strong></p>
                <label><input type="radio" name="q3" value="1"> Nunca.</label><br>
                <label><input type="radio" name="q3" value="2"> Sim, há muito tempo ou pouco tempo.</label>
            </div>

            <button type="button" onclick="calcularNivel()" class="btn-nav-red" style="width: 100%; margin-top: 20px; border:none;">Ver Meu Resultado</button>
        </form>

        <div id="resultado" style="display:none; margin-top: 20px; padding: 20px; background: #eef9f1; border-radius: 8px;">
            <h3 style="color: var(--color-success);">Parabéns!</h3>
            <p>Com base nas suas respostas, você se encaixa no nível:</p>
            <h2 id="nivel-texto" style="color: var(--color-primary); margin: 10px 0;">---</h2>
            <p>Vamos oficializar sua matrícula para este nível?</p>
            <a href="{{ url_for('pre_matricula') }}" class="btn-nav-red" style="text-decoration: none; display: block; margin-top: 15px;">Ir para Matrícula</a>
        </div>
    </div>
</div>

<script>
function calcularNivel() {
    const q1 = document.querySelector('input[name="q1"]:checked');
    const q2 = document.querySelector('input[name="q2"]:checked');
    const q3 = document.querySelector('input[name="q3"]:checked');

    if(!q1 || !q2 || !q3) {
        alert("Por favor, responda todas as perguntas!");
        return;
    }

    let pontos = parseInt(q1.value) + parseInt(q2.value) + parseInt(q3.value);
    let nivel = "";

    if (pontos <= 3) nivel = "Iniciante";
    else if (pontos <= 4) nivel = "Básico";
    else if (pontos <= 5) nivel = "Médio";
    else nivel = "Intermediário";

    document.getElementById('level-test').style.display = 'none';
    document.getElementById('quiz-intro').style.display = 'none';
    document.getElementById('nivel-texto').innerText = nivel;
    document.getElementById('resultado').style.display = 'block';
}
</script>
{% endblock %}